import{_ as B}from"./basket-Dj2cRuHf.js";import{q as D,s as N,g as T,v as j,d as M,a as V,u as W,r as C,x as q,o as y,c as b,f as r,t as h,j as P,l as k,h as E,w as A,p as G,i as U,_ as Z}from"./index-BpsLfx4t.js";const F="/blog-app/assets/pen-B5_mlmfo.svg",R="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2050%2050'%20width='50px'%20height='50px'%3e%3cpath%20d='M%2025%204.0625%20C%2012.414063%204.0625%202.0625%2012.925781%202.0625%2024%20C%202.0625%2030.425781%205.625%2036.09375%2011%2039.71875%20C%2010.992188%2039.933594%2011%2040.265625%2010.71875%2041.3125%20C%2010.371094%2042.605469%209.683594%2044.4375%208.25%2046.46875%20L%207.21875%2047.90625%20L%209%2047.9375%20C%2015.175781%2047.964844%2018.753906%2043.90625%2019.3125%2043.25%20C%2021.136719%2043.65625%2023.035156%2043.9375%2025%2043.9375%20C%2037.582031%2043.9375%2047.9375%2035.074219%2047.9375%2024%20C%2047.9375%2012.925781%2037.582031%204.0625%2025%204.0625%20Z%20M%2025%205.9375%20C%2036.714844%205.9375%2046.0625%2014.089844%2046.0625%2024%20C%2046.0625%2033.910156%2036.714844%2042.0625%2025%2042.0625%20C%2022.996094%2042.0625%2021.050781%2041.820313%2019.21875%2041.375%20L%2018.65625%2041.25%20L%2018.28125%2041.71875%20C%2018.28125%2041.71875%2015.390625%2044.976563%2010.78125%2045.75%20C%2011.613281%2044.257813%2012.246094%2042.871094%2012.53125%2041.8125%20C%2012.929688%2040.332031%2012.9375%2039.3125%2012.9375%2039.3125%20L%2012.9375%2038.8125%20L%2012.5%2038.53125%20C%207.273438%2035.21875%203.9375%2029.941406%203.9375%2024%20C%203.9375%2014.089844%2013.28125%205.9375%2025%205.9375%20Z'/%3e%3c/svg%3e";function z(t){return D()?(N(t),!0):!1}function I(t){return typeof t=="function"?t():T(t)}const O=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const H=Object.prototype.toString,J=t=>H.call(t)==="[object Object]",_=()=>{},K=Q();function Q(){var t,a;return O&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(ad|hone|od)/.test(window.navigator.userAgent)||((a=window==null?void 0:window.navigator)==null?void 0:a.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function w(t){var a;const l=I(t);return(a=l==null?void 0:l.$el)!=null?a:l}const $=O?window:void 0;function S(...t){let a,l,n,u;if(typeof t[0]=="string"||Array.isArray(t[0])?([l,n,u]=t,a=$):[a,l,n,u]=t,!a)return _;Array.isArray(l)||(l=[l]),Array.isArray(n)||(n=[n]);const p=[],m=()=>{p.forEach(s=>s()),p.length=0},d=(s,i,e,o)=>(s.addEventListener(i,e,o),()=>s.removeEventListener(i,e,o)),f=j(()=>[w(a),I(u)],([s,i])=>{if(m(),!s)return;const e=J(i)?{...i}:i;p.push(...l.flatMap(o=>n.map(c=>d(s,o,c,e))))},{immediate:!0,flush:"post"}),v=()=>{f(),m()};return z(v),v}let L=!1;function X(t,a,l={}){const{window:n=$,ignore:u=[],capture:p=!0,detectIframe:m=!1}=l;if(!n)return _;K&&!L&&(L=!0,Array.from(n.document.body.children).forEach(e=>e.addEventListener("click",_)),n.document.documentElement.addEventListener("click",_));let d=!0;const f=e=>u.some(o=>{if(typeof o=="string")return Array.from(n.document.querySelectorAll(o)).some(c=>c===e.target||e.composedPath().includes(c));{const c=w(o);return c&&(e.target===c||e.composedPath().includes(c))}}),s=[S(n,"click",e=>{const o=w(t);if(!(!o||o===e.target||e.composedPath().includes(o))){if(e.detail===0&&(d=!f(e)),!d){d=!0;return}a(e)}},{passive:!0,capture:p}),S(n,"pointerdown",e=>{const o=w(t);d=!f(e)&&!!(o&&!e.composedPath().includes(o))},{passive:!0}),m&&S(n,"blur",e=>{setTimeout(()=>{var o;const c=w(t);((o=n.document.activeElement)==null?void 0:o.tagName)==="IFRAME"&&!(c!=null&&c.contains(n.document.activeElement))&&a(e)},0)})].filter(Boolean);return()=>s.forEach(e=>e())}const x=t=>(G("data-v-67344321"),t=t(),U(),t),Y={class:"post-card"},tt={class:"title-post"},et={class:"p-text-lg--bold"},ot={key:0,class:"action"},st={class:"p-text-sm date-avtor"},nt=["datetime"],it={class:"p-text-md"},rt={class:"footer-card"},at=x(()=>r("img",{src:R,alt:"",class:"icon"},null,-1)),lt=x(()=>r("h3",{class:"p-text-xs"},"Вы действительно хотите удалить этот пост?",-1)),ct={class:"group-btn"},dt=M({__name:"PostCard",props:{post:{},edit:{type:Boolean,default:!1}},emits:["editPost","update"],setup(t,{emit:a}){const l=t,n=a,u=V(),p=W();u.getUserOnePost(l.post.id);const m=C(u.userOnePost),d=C(!1);function f(){p.deletePost(l.post.id),n("update"),d.value=!1}const v=C(null);return X(v,()=>d.value=!1),(s,i)=>{var o,c;const e=q("router-link");return y(),b("div",Y,[r("div",tt,[r("h3",et,h(s.post.title),1),s.edit?(y(),b("div",ot,[r("img",{src:F,alt:"",class:"icon btn-edit",title:"редактировать",onClick:i[0]||(i[0]=g=>n("editPost",s.post.id))}),r("img",{src:B,alt:"",class:"icon btn-dellete",title:"удалить",onClick:i[1]||(i[1]=g=>d.value=!0)})])):P("",!0)]),r("div",st,[r("time",{datetime:s.post.dateTime},h(new Date(s.post.dateTime).toLocaleString()),9,nt),r("span",null,[k(" Автор: "),E(e,{to:{name:"user",params:{id:(o=m.value)==null?void 0:o.id}},class:"link link-avtor"},{default:A(()=>{var g;return[k(h((g=m.value)==null?void 0:g.fullName),1)]}),_:1},8,["to"])])]),r("p",it,h(s.post.briefDescription),1),r("div",rt,[r("div",{class:"comment",onClick:i[2]||(i[2]=g=>s.$router.push(`/blog-app/post/${s.post.id}#comments`)),style:{cursor:"pointer"}},[at,r("span",null,h((c=s.post.comments)==null?void 0:c.length),1)]),E(e,{to:{name:"post",params:{id:s.post.id}},class:"link link-more"},{default:A(()=>[k("Подробнее → ")]),_:1},8,["to"])]),d.value?(y(),b("div",{key:0,class:"deletion",ref_key:"modal",ref:v},[lt,r("div",ct,[r("button",{onClick:i[3]||(i[3]=g=>d.value=!1),class:"btn btn-no"},"Нет"),r("button",{onClick:f,class:"btn btn-yes"},"Да")])],512)):P("",!0)])}}}),mt=Z(dt,[["__scopeId","data-v-67344321"]]);export{mt as P,X as o};
